(function($){var lightbox={elements:{},set:[],set_index:0};function _set(){var return_values={'previous':false,'current':lightbox.set[lightbox.set_index],'next':false};return_values.previous=lightbox.set[lightbox.set_index-1];return_values.next=lightbox.set[lightbox.set_index+1];if(typeof return_values.previous==='undefined'){return_values.previous=false}if(typeof return_values.next==='undefined'){return_values.next=false}return return_values}function _centre_image(){$(lightbox.elements.image).load(function(){lightbox.elements.content.css({'display':'block','position':'absolute','visibility':'hidden'});lightbox.elements.content.css({'display':'none','margin-top':((lightbox.elements.content.outerHeight()/2)*-1),'margin-left':((lightbox.elements.content.outerWidth()/2)*-1),'position':'fixed','visibility':'visible'});lightbox.elements.content.fadeIn(500)})}function _open(settings,lightbox_set){$('body').append('<div id="'+settings.lightbox_id+'_background"></div>');lightbox.elements.background=$('#'+settings.lightbox_id+'_background');lightbox.elements.background.css({'background':'#000000 url(inc/jscripts/lightbox/images/loading.gif) no-repeat fixed center','display':'none','height':'100%','left':'0%','margin':'0','padding':'0','position':'fixed','top':'0%','width':'100%','z-index':'1201'});$('body').append('<div id="'+settings.lightbox_id+'_content"><div class="controls"><a class="previous" href="#"></a><a class="close" href="#"></a><a class="next" href="#"></a></div><img src="'+lightbox_set.current+'" /></div>');lightbox.elements.content=$('#'+settings.lightbox_id+'_content');lightbox.elements.controls=$('#'+settings.lightbox_id+'_content .controls');$('.close',lightbox.elements.controls).css({'background':'url(inc/jscripts/lightbox/images/close.png) no-repeat center center','display':'block','height':'30px','position':'absolute','right':'-10px','top':'-10px','width':'30px'});$('.previous',lightbox.elements.controls).css({'background':'url(inc/jscripts/lightbox/images/previous.png) no-repeat center center','display':'block','height':'30px','left':'-15px','position':'absolute','top':'45%','width':'30px'});$('.next',lightbox.elements.controls).css({'background':'url(inc/jscripts/lightbox/images/next.png) no-repeat center center','display':'block','height':'30px','position':'absolute','right':'-15px','top':'45%','width':'30px'});lightbox.elements.image=$('#'+settings.lightbox_id+'_content img');lightbox.elements.image.css({'display':'block','max-height':($(window).height()-100),'max-width':($(window).width()-100)});if(!lightbox_set.previous){$('.previous',lightbox.elements.controls).css('display','none')}if(!lightbox_set.next){$('.next',lightbox.elements.controls).css('display','none')}lightbox.elements.content.css({'background':'#ffffff','box-shadow':'0 0 25px #000000','color':'#101010','display':'none','left':'50%','padding':'6px','position':'fixed','top':'50%','z-index':'1202'});lightbox.elements.background.fadeTo(300,settings.backgroundOpacity)}function _change(lightbox_set){lightbox.elements.content.fadeOut(250,function(){lightbox.elements.image.attr('src',lightbox_set.current);if(lightbox_set.previous){$('.previous',lightbox.elements.controls).css('display','block')}else{$('.previous',lightbox.elements.controls).css('display','none')}if(lightbox_set.next){$('.next',lightbox.elements.controls).css('display','block')}else{$('.next',lightbox.elements.controls).css('display','none')}})}function _close(){lightbox.elements.content.fadeOut(300,function(){lightbox.elements.content.remove();lightbox.elements.background.fadeOut(300,function(){lightbox.elements.background.remove()})})}$.fn.lightbox=function(options){var uid='';for(i=0;i<8;i++){uid+=Math.floor(Math.random()*16).toString(16)}var settings={'lightbox_id':'lightbox_'+uid,'backgroundOpacity':0.5};if(options){$.extend(settings,options)}return this.each(function(){$(this).bind('click',function(){lightbox.elements={};lightbox.set=[];lightbox.set_index=0;var lightbox_attribute=$(this).attr('data-lightbox');if(typeof lightbox_attribute!=='undefined'&&lightbox_attribute!='lightbox'){lightbox.set=$("a[data-lightbox="+lightbox_attribute+"]");lightbox.set_index=lightbox.set.index(this)}else{lightbox.set=$(this)}lightbox_set=_set();_open(settings,lightbox_set);_centre_image();$('.close',lightbox.elements.controls).bind('click',function(){_close();return false});$(lightbox.elements.background).bind('click',function(){_close();return false});$('.previous',lightbox.elements.controls).bind('click',function(){if(lightbox_set.previous){lightbox.set_index--;lightbox_set=_set();_change(lightbox_set)}return false});$('.next',lightbox.elements.controls).bind('click',function(){if(lightbox_set.next){lightbox.set_index++;lightbox_set=_set();_change(lightbox_set)}return false});return false})})};$(document).keyup(function(e){if(e.keyCode==27){$('.close',lightbox.elements.controls).trigger('click')}if(e.keyCode==37){$('.previous',lightbox.elements.controls).trigger('click')}if(e.keyCode==39){$('.next',lightbox.elements.controls).trigger('click')}})})(jQuery);